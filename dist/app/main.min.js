!function(){"user strict";angular.module("collectionApp",["ui.router","ngMaterial","ngFileUpload"]),angular.module("collectionApp").constant("config",{uploadpath:"uploads/"})}(),function(){"user strict";angular.module("collectionApp").config(function(t,e){e.otherwise("/home"),t.state("home",{url:"/home",controller:"homeCtrl",templateUrl:"views/home.html"}).state("newcollection",{url:"/newcollection",controller:"newCollectionCtrl",templateUrl:"views/newcollection.html"}).state("addcategory",{url:"/addcategory",controller:"addCategoryCtrl",templateUrl:"views/addcategory.html"}).state("additem",{url:"/additem",controller:"addItemCtrl",templateUrl:"views/additem.html"}).state("viewitem",{url:"/viewitem/:itemid",controller:"itemCtrl",templateUrl:"views/viewitem.html"}).state("browse",{url:"/browse",controller:"browseCtrl",templateUrl:"views/browsecollection.html"})})}(),function(){"use strict";function t(t,e){function o(){e.updateList("category").then(function(e){t.categoryList=e.data})["catch"](function(t){alert("Error:",t.status,t.data)})}function c(){e.updateList("collection").then(function(e){t.collectionList=e.data})["catch"](function(t){alert("Error:",t.status,t.data)})}t.categoryList=[],t.collectionList=[],c(),o(),t.submitForm=function(c){if(t.categoryForm.$valid){var n={};n.name=c.name,n.year=c.year,n.collection=c.collection.collection_id,e.addCategory(n).then(function(e){t.categoryForm.$setPristine(),t.category=null,alert(e.data),o()})["catch"](function(t){alert("Error:",t.status,t.data)})}}}angular.module("collectionApp").controller("addCategoryCtrl",t),t.$inject=["$scope","ioService"]}(),function(){"use strict";function t(t,e,o,c){function n(){e.updateList("category").then(function(e){t.categoryList=e.data})["catch"](function(t){alert("Error:",t.status,t.data)})}function i(){e.updateList("collection").then(function(e){t.collectionList=e.data})["catch"](function(t){alert("Error:",t.status,t.data)})}t.categoryList=[],t.collectionList=[],i(),n(),t.submitForm=function(e){if(t.itemForm.$valid){var c={};c.name=e.name,c.desc=e.desc,c.category=e.category.category_id,c.collection=e.collection.collection_id,o.upload({url:"backend/include.php?type=item",method:"POST",data:{file:t.item.picture,otherinfo:e}}).then(function(e){t.itemForm.$setPristine(),t.item=null,alert(e.data),console.log("Success "+e.config.data.file.name+"uploaded. Response: "+e.data)},function(t){console.log("Error status: "+t.status)},function(t){var e=parseInt(100*t.loaded/t.total);console.log("progress: "+e+"% "+t.config.data.file.name)})}}}angular.module("collectionApp").controller("addItemCtrl",t),t.$inject=["$scope","ioService","Upload","$timeout"]}(),function(){"use strict";function t(t,e,o){function c(){e.updateList("category").then(function(e){t.categoryList=e.data})["catch"](function(t){alert("Error:",t.status,t.data)})}function n(){e.updateList("collection").then(function(e){t.collectionList=e.data})["catch"](function(t){alert("Error:",t.status,t.data)})}function i(){e.updateList("item").then(function(e){t.itemList=e.data})["catch"](function(t){alert("Error:",t.status,t.data)})}t.categoryList=[],t.collectionList=[],t.itemList=[],t.uploadpath=o.uploadpath,n(),c(),i()}angular.module("collectionApp").controller("browseCtrl",t),t.$inject=["$scope","ioService","config"]}(),function(){"use strict";function t(t){}angular.module("collectionApp").controller("homeCtrl",t),t.$inject=["$scope"]}(),function(){"use strict";function t(t,e){function o(){e.updateList("collection").then(function(e){t.collectionList=e.data})["catch"](function(t){alert("Error:",t.status,t.data)})}t.collectionList=[],o(),t.submitForm=function(c){t.collectionForm.$valid&&(console.log(c),e.addCollection(c).then(function(e){t.collectionForm.$setPristine(),t.collection=null,alert(e.data),o()})["catch"](function(t){alert("Error:",t.status,t.data)}))}}angular.module("collectionApp").controller("newCollectionCtrl",t),t.$inject=["$scope","ioService"]}(),function(){"use strict";function t(t,e,o,c,n){function i(o){e.updateList("item",o).then(function(e){t.item=e.data,l(t.item[0].collection_id)})}function l(o){e.updateList("collection",o).then(function(e){t.collection=e.data,t.item[0].collection_name=t.collection[0].collection_name,a(t.item[0].category_id)})}function a(o){e.updateList("category",o).then(function(e){t.category=e.data,t.item[0].category_name=t.category[0].category_name})}console.log("Params: "+c.itemid),t.category=[],t.collection=[],t.item=[],t.uploadpath=o.uploadpath,i(c.itemid)}angular.module("collectionApp").controller("itemCtrl",t),t.$inject=["$scope","ioService","config","$stateParams","$q"]}(),function(){"use strict";angular.module("collectionApp").factory("ioService",function(t){var e={};return e.addCollection=function(e){return t.post("backend/include.php?type=col",e)},e.addCategory=function(e){return console.log(e),t.post("backend/include.php?type=cat",e)},e.updateList=function(e,o){switch(e){case"collection":return o?(console.log("return collection :"+o),t.get("backend/updatelist.php?type=col&id="+o)):t.get("backend/updatelist.php?type=col");case"category":return o?t.get("backend/updatelist.php?type=cat&id="+o):t.get("backend/updatelist.php?type=cat");case"item":return o?(console.log("return Item :"+o),t.get("backend/updatelist.php?type=item&id="+o)):(console.log("return all Items"),t.get("backend/updatelist.php?type=item"))}},e})}();