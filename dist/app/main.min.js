!function(){"user strict";angular.module("collectionApp",["ui.router","ngMaterial","ngFileUpload"]),angular.module("collectionApp").constant("config",{uploadpath:"uploads/"})}(),function(){"user strict";angular.module("collectionApp").config(function(t,o,e){o.otherwise("/home"),t.state("home",{url:"/home",controller:"homeCtrl",templateUrl:"views/home.html"}).state("newcollection",{url:"/newcollection",controller:"newCollectionCtrl",templateUrl:"views/newcollection.html"}).state("addcategory",{url:"/addcategory",controller:"addCategoryCtrl",templateUrl:"views/addcategory.html"}).state("additem",{url:"/additem",controller:"addItemCtrl",templateUrl:"views/additem.html"}).state("viewitem",{url:"/viewitem/:itemid",controller:"itemCtrl",templateUrl:"views/viewitem.html"}).state("browse",{url:"/browse",controller:"browseCtrl",templateUrl:"views/browsecollection.html"}),e.interceptors.push("LoadingInterceptor")})}(),function(){"use strict";function t(t,o,e,n){function c(){o.updateList("category").then(function(o){t.categoryList=o.data})["catch"](function(t){alert("Error:",t.status,t.data)}),o.updateList("collection").then(function(o){t.collectionList=o.data})["catch"](function(t){alert("Error:",t.status,t.data)})}t.categoryList=[],t.collectionList=[],t.currCollection={},t.toastPosition={bottom:!0,top:!1,left:!1,right:!0},c(),t.getToastPosition=function(){return Object.keys(t.toastPosition).filter(function(o){return t.toastPosition[o]}).join(" ")},t.setCollection=function(o){var e=JSON.parse(o);t.currCollection=e},t.submitForm=function(n){n.collection=t.currCollection.collection_id,t.categoryForm.$valid&&o.addCategory(n).then(function(o){e.show(e.simple().content("Category "+n.name+" added !").position(t.getToastPosition()).hideDelay(3e3)),t.categoryForm.$setPristine(),t.category=null,updateCategory()})["catch"](function(t){alert("Error:",t.status,t.data)})}}angular.module("collectionApp").controller("addCategoryCtrl",t),t.$inject=["$scope","ioService","$mdToast","$animate"]}(),function(){"use strict";function t(t,o,e,n,c,i){function r(){o.updateList("category").then(function(o){t.categoryList=o.data})["catch"](function(t){alert("Error:",t.status,t.data)}),o.updateList("collection").then(function(o){t.collectionList=o.data})["catch"](function(t){alert("Error:",t.status,t.data)})}t.categoryList=[],t.collectionList=[],t.currCollection={};var a=document.getElementById("fileInput"),l=document.getElementById("uploadButton");l.addEventListener("click",function(){a.click()}),t.toastPosition={bottom:!1,top:!0,left:!1,right:!0},r(),t.setCollection=function(o){var e=JSON.parse(o);t.currCollection=e},t.getToastPosition=function(){return Object.keys(t.toastPosition).filter(function(o){return t.toastPosition[o]}).join(" ")},t.submitForm=function(o){var n=t.currCollection.collection_name,i=t.currCollection.collection_id;console.log("collname:"+n+" id:"+i),t.itemForm.$valid&&e.upload({url:"backend/include.php?type=item",method:"POST",data:{file:t.item.picture,otherinfo:o,collName:n,collId:i}}).then(function(e){c.show(c.simple().content("Item "+o.name+" added !").position(t.getToastPosition()).hideDelay(3e3)),t.itemForm.$setPristine(),t.item=null,console.log("Success "+e.config.data.file.name+"uploaded. Response: "+e.data)},function(t){console.log("Error status: "+t.status)},function(t){var o=parseInt(100*t.loaded/t.total);console.log("progress: "+o+"% "+t.config.data.file.name)})}}angular.module("collectionApp").controller("addItemCtrl",t),t.$inject=["$scope","ioService","Upload","$timeout","$mdToast","$animate"]}(),function(){"use strict";function t(t,o,e){function n(){o.updateList("category").then(function(o){t.categoryList=o.data})["catch"](function(t){alert("Error:",t.status,t.data)}),o.updateList("collection").then(function(o){t.collectionList=o.data})["catch"](function(t){alert("Error:",t.status,t.data)}),o.updateList("item").then(function(o){t.itemList=o.data})["catch"](function(t){alert("Error:",t.status,t.data)})}t.categoryList=[],t.collectionList=[],t.itemList=[],t.currentCategory={},t.currCollection={},t.uploadpath=e.uploadpath,n(),t.setCollection=function(o){var e=JSON.parse(o);t.currCollection=e},t.setCategory=function(o){var e=JSON.parse(o);t.currentCategory=e}}angular.module("collectionApp").controller("browseCtrl",t),t.$inject=["$scope","ioService","config"]}(),function(){"use strict";function t(t){}angular.module("collectionApp").controller("homeCtrl",t),t.$inject=["$scope"]}(),function(){"use strict";function t(t,o,e,n){function c(){o.updateList("collection").then(function(o){t.collectionList=o.data})["catch"](function(t){alert("Error:",t.status,t.data)})}t.collectionList=[],c(),t.toastPosition={bottom:!1,top:!0,left:!1,right:!0},t.getToastPosition=function(){return Object.keys(t.toastPosition).filter(function(o){return t.toastPosition[o]}).join(" ")},t.submitForm=function(n){t.collectionForm.$valid&&o.addCollection(n).then(function(o){e.show(e.simple().content("Collection "+n.name+" added !").position(t.getToastPosition()).hideDelay(3e3)),t.collectionForm.$setPristine(),t.collection="",c()})["catch"](function(t){alert("Error:",t.status,t.data)})}}angular.module("collectionApp").controller("newCollectionCtrl",t),t.$inject=["$scope","ioService","$mdToast","$animate"]}(),function(){"use strict";function t(t,o,e,n,c){function i(e){o.updateList("item",e).then(function(o){t.item=o.data,r(t.item[0].collection_id)})["catch"](function(t){alert("Error:",t.status,t.data)})}function r(e){o.updateList("collection",e).then(function(o){t.collection=o.data,t.item[0].collection_name=t.collection[0].collection_name,a(t.item[0].category_id)})["catch"](function(t){alert("Error:",t.status,t.data)})}function a(e){o.updateList("category",e).then(function(o){t.category=o.data,t.item[0].category_name=t.category[0].category_name})["catch"](function(t){alert("Error:",t.status,t.data)})}console.log("Params: "+n.itemid),t.category=[],t.collection=[],t.item=[],t.uploadpath=e.uploadpath,i(n.itemid)}angular.module("collectionApp").controller("itemCtrl",t),t.$inject=["$scope","ioService","config","$stateParams","$q"]}(),function(){"use strict";angular.module("collectionApp").factory("ioService",function(t){var o={};return o.addCollection=function(o){return t.post("backend/include.php?type=col",o)},o.addCategory=function(o){return console.log(o),t.post("backend/include.php?type=cat",o)},o.updateList=function(o,e){switch(o){case"collection":return e?(console.log("return collection :"+e),t.get("backend/updatelist.php?type=col&id="+e)):t.get("backend/updatelist.php?type=col");case"category":return e?t.get("backend/updatelist.php?type=cat&id="+e):t.get("backend/updatelist.php?type=cat");case"item":return e?(console.log("return Item :"+e),t.get("backend/updatelist.php?type=item&id="+e)):(console.log("return all Items"),t.get("backend/updatelist.php?type=item"))}},o})}(),function(){"use strict";angular.module("collectionApp").service("LoadingInterceptor",["$q","$rootScope","$log",function(t,o,e){function n(){return i>r}function c(){o.loading=n()}var i=0,r=0;return{request:function(t){return i++,c(),t},requestError:function(o){return r++,c(),e.error("Request error:",o),t.reject(o)},response:function(t){return r++,c(),t},responseError:function(o){return r++,c(),e.error("Response error:",o),t.reject(o)}}}])}();